(this["webpackJsonpday-5"]=this["webpackJsonpday-5"]||[]).push([[0],{57:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),s=n.n(o),r=n(21),c=n.n(r),i=(n(57),n(23)),l=n(50),d=n(15),u=n(16),p=n(20),j=n(19),h=n(93),b=n(94),m=n(10);var g=function(e){var t={marginLeft:"10px"};return Object(a.jsxs)(h.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(b.a,{className:"mr-auto",children:[Object(a.jsx)(m.b,{to:"/",children:"Todos"}),Object(a.jsx)(m.b,{style:t,to:"/add-form",children:"Add Todo"}),e.loggedInUser?Object(a.jsx)("button",{style:t,onClick:e.onLogout,children:"Logout"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.b,{style:t,to:"/sign-in",children:"Sign In"}),Object(a.jsx)(m.b,{style:t,to:"/sign-up",children:"Sign Up"})]})]})})]})},O=(n(66),n(8)),x=n.n(O),f=n(4);n(90),n(95),n(91),n(92),n(84),n(85);o.Component;var v=function(e){return Object(a.jsxs)("div",{children:["In todo list",e.todos.map((function(e){return Object(a.jsx)(m.b,{to:"/todo/".concat(e._id),children:Object(a.jsx)("p",{children:e.name},e._id)})}))]})};var y=function(e){return e.loggedInUser?Object(a.jsxs)("form",{onSubmit:e.onAdd,children:[Object(a.jsx)("input",{name:"name",type:"text",placeholder:"Enter name"}),Object(a.jsx)("input",{name:"description",type:"text",placeholder:"Enter description"}),Object(a.jsx)("input",{type:"file",className:"form-control",name:"image",id:"image"}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]}):Object(a.jsx)(f.a,{to:"/sign-in"})},S="https://react-training-ironhack.herokuapp.com/api",I=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={todo:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.todoId;console.log(this.props),x.a.get("".concat(S,"/todos/").concat(t)).then((function(t){e.setState({todo:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state.todo,n=t.name,o=t.description,s=t.image,r=t._id;return this.props.loggedInUser?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:["Name: ",n]}),Object(a.jsxs)("div",{children:["Detail: ",o]}),Object(a.jsx)("img",{style:{height:"100px"},src:s}),Object(a.jsx)("br",{}),Object(a.jsx)(m.b,{to:"/todo/".concat(r,"/edit"),children:Object(a.jsx)("button",{children:"Edit"})}),Object(a.jsx)("button",{onClick:function(){e.props.onDelete(r)},children:"Delete"})]}):Object(a.jsx)(f.a,{to:"/sign-in"})}}]),n}(o.Component),U=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={todo:{}},e.handleNameChange=function(t){var n=JSON.parse(JSON.stringify(e.state.todo));n.name=t.target.value,e.setState({todo:n})},e.handleDescChange=function(t){var n=JSON.parse(JSON.stringify(e.state.todo));n.description=t.target.value,e.setState({todo:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.todoId;x.a.get("".concat(S,"/todos/").concat(t)).then((function(t){e.setState({todo:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state.todo,n=t.name,o=t.description;return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{onChange:this.handleNameChange,type:"text",value:n}),Object(a.jsx)("input",{onChange:this.handleDescChange,type:"text",value:o}),Object(a.jsx)("button",{onClick:function(){e.props.onEdit(e.state.todo)},children:"Edit"})]})}}]),n}(o.Component);function w(e){return Object(o.useEffect)((function(){return e.onUnmount}),[]),Object(a.jsxs)("form",{onSubmit:e.onSignIn,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(a.jsx)("input",{onChange:e.onUnmount,type:"text",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(a.jsx)("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),e.errorMessage?Object(a.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})}function C(e){return Object(a.jsxs)("form",{onSubmit:e.onSignUp,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputUsername",children:"Username"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"exampleInputUsername",name:"username"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(a.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp"}),Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(a.jsx)("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})}var N=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={todos:[],loggedInUser:null,errorMessage:null},e.handleAdd=function(t){t.preventDefault();var n=t.target,a=n.name,o=n.description,s=n.image;console.log(s.files);var r=s.files[0],c=new FormData;c.append("imageUrl",r),x.a.post("".concat(S,"/upload"),c).then((function(t){console.log(t.data);var n={name:a.value,description:o.value,completed:!1,image:t.data.image};x.a.post("".concat(S,"/create"),n).then((function(t){e.setState({todos:[t.data].concat(Object(l.a)(e.state.todos))},(function(){e.props.history.push("/")}))}))}))},e.handleDelete=function(t){x.a.delete("".concat(S,"/todos/").concat(t)).then((function(){var n=e.state.todos.filter((function(e){return e._id!==t}));e.setState({todos:n},(function(){e.props.history.push("/")}))}))},e.handleEdit=function(t){x.a.patch("".concat(S,"/todos/").concat(t._id),{name:t.name,description:t.description,completed:t.completed}).then((function(){var n=e.state.todos.map((function(e){return e._id==t._id&&(e=t),e}));e.setState({todos:n},(function(){e.props.history.push("/")}))}))},e.handleSignUp=function(t){t.preventDefault();var n=t.target,a=n.username,o=n.email,s=n.password;x.a.post("".concat(S,"/signup"),{username:a.value,email:o.value,password:s.value},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))}))},e.handleSignIn=function(t){t.preventDefault();var n=t.target,a=n.email,o=n.password;x.a.post("".concat(S,"/signin"),{email:a.value,password:o.value},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){console.log(t.response.data.error),e.setState({errorMessage:t.response.data.error})}))},e.handleLogOut=function(t){x.a.post("".concat(S,"/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null})}))},e.handleUnMount=function(){console.log("handleUnMount called"),e.setState({errorMessage:null})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||x.a.get("".concat(S,"/user"),{withCredentials:!0}).then((function(e){console.log(e.data)})),x.a.get("".concat(S,"/todos")).then((function(t){e.setState({todos:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loggedInUser,o=t.errorMessage;return Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{loggedInUser:n,onLogout:this.handleLogOut}),Object(a.jsx)("h3",{children:"Shopping List"}),n?Object(a.jsxs)("h5",{children:["User is: ",n.username]}):null,Object(a.jsxs)(f.d,{children:[Object(a.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(v,{todos:e.state.todos})}}),Object(a.jsx)(f.b,{path:"/add-form",render:function(){return Object(a.jsx)(y,{loggedInUser:n,onAdd:e.handleAdd})}}),Object(a.jsx)(f.b,{exact:!0,path:"/todo/:todoId",render:function(t){return Object(a.jsx)(I,Object(i.a)({loggedInUser:n,onDelete:e.handleDelete},t))}}),Object(a.jsx)(f.b,{path:"/todo/:todoId/edit",render:function(t){return Object(a.jsx)(U,Object(i.a)({onEdit:e.handleEdit},t))}}),Object(a.jsx)(f.b,{path:"/sign-in",render:function(t){return Object(a.jsx)(w,Object(i.a)({onUnmount:e.handleUnMount,errorMessage:o,onSignIn:e.handleSignIn},t))}}),Object(a.jsx)(f.b,{path:"/sign-up",render:function(t){return Object(a.jsx)(C,Object(i.a)({onSignUp:e.handleSignUp},t))}})]})]})}}]),n}(o.Component),D=Object(f.g)(N),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),s(e),r(e)}))};c.a.render(Object(a.jsx)(m.a,{children:Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(D,{})})}),document.getElementById("root")),E()}},[[86,1,2]]]);
//# sourceMappingURL=main.b113013c.chunk.js.map