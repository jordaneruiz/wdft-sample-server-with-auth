(this["webpackJsonpday-5"]=this["webpackJsonpday-5"]||[]).push([[0],{57:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(0),s=n.n(o),r=n(21),i=n.n(r),c=(n(57),n(23)),l=n(50),d=n(15),u=n(16),p=n(20),h=n(19),j=n(93),b=n(94),m=n(10);var g=function(t){var e={marginLeft:"10px"};return Object(a.jsxs)(j.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(b.a,{className:"mr-auto",children:[Object(a.jsx)(m.b,{to:"/",children:"Todos"}),Object(a.jsx)(m.b,{style:e,to:"/add-form",children:"Add Todo"}),t.loggedInUser?Object(a.jsx)("button",{style:e,onClick:t.onLogout,children:"Logout"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.b,{style:e,to:"/sign-in",children:"Sign In"}),Object(a.jsx)(m.b,{style:e,to:"/sign-up",children:"Sign Up"})]})]})})]})},O=(n(66),n(8)),x=n.n(O),f=n(4);n(90),n(95),n(91),n(92),n(84),n(85);o.Component;var v=function(t){return Object(a.jsxs)("div",{children:["In todo list",t.todos.map((function(t){return Object(a.jsx)(m.b,{to:"/todo/".concat(t._id),children:Object(a.jsx)("p",{children:t.name},t._id)})}))]})};var y=function(t){return t.loggedInUser?Object(a.jsxs)("form",{onSubmit:t.onAdd,children:[Object(a.jsx)("input",{name:"name",type:"text",placeholder:"Enter name"}),Object(a.jsx)("input",{name:"description",type:"text",placeholder:"Enter description"}),Object(a.jsx)("input",{type:"file",className:"form-control",name:"image",id:"image"}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]}):Object(a.jsx)(f.a,{to:"/sign-in"})},S=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={todo:{}},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.todoId;console.log(this.props),x.a.get("http://localhost:5000/api/todos/".concat(e)).then((function(e){t.setState({todo:e.data})}))}},{key:"render",value:function(){var t=this,e=this.state.todo,n=e.name,o=e.description,s=e.image,r=e._id;return this.props.loggedInUser?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:["Name: ",n]}),Object(a.jsxs)("div",{children:["Detail: ",o]}),Object(a.jsx)("img",{style:{height:"100px"},src:s}),Object(a.jsx)("br",{}),Object(a.jsx)(m.b,{to:"/todo/".concat(r,"/edit"),children:Object(a.jsx)("button",{children:"Edit"})}),Object(a.jsx)("button",{onClick:function(){t.props.onDelete(r)},children:"Delete"})]}):Object(a.jsx)(f.a,{to:"/sign-in"})}}]),n}(o.Component),I=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={todo:{}},t.handleNameChange=function(e){var n=JSON.parse(JSON.stringify(t.state.todo));n.name=e.target.value,t.setState({todo:n})},t.handleDescChange=function(e){var n=JSON.parse(JSON.stringify(t.state.todo));n.description=e.target.value,t.setState({todo:n})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.todoId;x.a.get("http://localhost:5000/api/todos/".concat(e)).then((function(e){t.setState({todo:e.data})}))}},{key:"render",value:function(){var t=this,e=this.state.todo,n=e.name,o=e.description;return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{onChange:this.handleNameChange,type:"text",value:n}),Object(a.jsx)("input",{onChange:this.handleDescChange,type:"text",value:o}),Object(a.jsx)("button",{onClick:function(){t.props.onEdit(t.state.todo)},children:"Edit"})]})}}]),n}(o.Component);function U(t){return Object(o.useEffect)((function(){return t.onUnmount}),[]),Object(a.jsxs)("form",{onSubmit:t.onSignIn,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(a.jsx)("input",{onChange:t.onUnmount,type:"text",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(a.jsx)("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),t.errorMessage?Object(a.jsx)("p",{style:{color:"red"},children:t.errorMessage}):null]})}function w(t){return Object(a.jsxs)("form",{onSubmit:t.onSignUp,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputUsername",children:"Username"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"exampleInputUsername",name:"username"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(a.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp"}),Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(a.jsx)("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})}var C=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={todos:[],loggedInUser:null,errorMessage:null},t.handleAdd=function(e){e.preventDefault();var n=e.target,a=n.name,o=n.description,s=n.image;console.log(s.files);var r=s.files[0],i=new FormData;i.append("imageUrl",r),x.a.post("http://localhost:5000/api/upload",i).then((function(e){console.log(e.data);var n={name:a.value,description:o.value,completed:!1,image:e.data.image};x.a.post("http://localhost:5000/api/create",n).then((function(e){t.setState({todos:[e.data].concat(Object(l.a)(t.state.todos))},(function(){t.props.history.push("/")}))}))}))},t.handleDelete=function(e){x.a.delete("http://localhost:5000/api/todos/".concat(e)).then((function(){var n=t.state.todos.filter((function(t){return t._id!==e}));t.setState({todos:n},(function(){t.props.history.push("/")}))}))},t.handleEdit=function(e){x.a.patch("http://localhost:5000/api/todos/".concat(e._id),{name:e.name,description:e.description,completed:e.completed}).then((function(){var n=t.state.todos.map((function(t){return t._id==e._id&&(t=e),t}));t.setState({todos:n},(function(){t.props.history.push("/")}))}))},t.handleSignUp=function(e){e.preventDefault();var n=e.target,a=n.username,o=n.email,s=n.password;x.a.post("http://localhost:5000/api/signup",{username:a.value,email:o.value,password:s.value},{withCredentials:!0}).then((function(e){t.setState({loggedInUser:e.data},(function(){t.props.history.push("/")}))}))},t.handleSignIn=function(e){e.preventDefault();var n=e.target,a=n.email,o=n.password;x.a.post("http://localhost:5000/api/signin",{email:a.value,password:o.value},{withCredentials:!0}).then((function(e){t.setState({loggedInUser:e.data},(function(){t.props.history.push("/")}))})).catch((function(e){console.log(e.response.data.error),t.setState({errorMessage:e.response.data.error})}))},t.handleLogOut=function(e){x.a.post("http://localhost:5000/api/logout",{},{withCredentials:!0}).then((function(){t.setState({loggedInUser:null})}))},t.handleUnMount=function(){console.log("handleUnMount called"),t.setState({errorMessage:null})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.state.loggedInUser||x.a.get("http://localhost:5000/api/user",{withCredentials:!0}).then((function(t){console.log(t.data)})),x.a.get("http://localhost:5000/api/todos").then((function(e){t.setState({todos:e.data})}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.loggedInUser,o=e.errorMessage;return Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{loggedInUser:n,onLogout:this.handleLogOut}),Object(a.jsx)("h3",{children:"Shopping List"}),n?Object(a.jsxs)("h5",{children:["User is: ",n.username]}):null,Object(a.jsxs)(f.d,{children:[Object(a.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(v,{todos:t.state.todos})}}),Object(a.jsx)(f.b,{path:"/add-form",render:function(){return Object(a.jsx)(y,{loggedInUser:n,onAdd:t.handleAdd})}}),Object(a.jsx)(f.b,{exact:!0,path:"/todo/:todoId",render:function(e){return Object(a.jsx)(S,Object(c.a)({loggedInUser:n,onDelete:t.handleDelete},e))}}),Object(a.jsx)(f.b,{path:"/todo/:todoId/edit",render:function(e){return Object(a.jsx)(I,Object(c.a)({onEdit:t.handleEdit},e))}}),Object(a.jsx)(f.b,{path:"/sign-in",render:function(e){return Object(a.jsx)(U,Object(c.a)({onUnmount:t.handleUnMount,errorMessage:o,onSignIn:t.handleSignIn},e))}}),Object(a.jsx)(f.b,{path:"/sign-up",render:function(e){return Object(a.jsx)(w,Object(c.a)({onSignUp:t.handleSignUp},e))}})]})]})}}]),n}(o.Component),N=Object(f.g)(C),D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),o(t),s(t),r(t)}))};i.a.render(Object(a.jsx)(m.a,{children:Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(N,{})})}),document.getElementById("root")),D()}},[[86,1,2]]]);
//# sourceMappingURL=main.42d6a97f.chunk.js.map